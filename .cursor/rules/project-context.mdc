---
description: Project overview, architecture, and build system for setup-dotnet
alwaysApply: true
---

# setup-dotnet – Project Context

**Important:** Custom action `fast-actions/setup-dotnet` – **not** the official `actions/setup-dotnet`. TypeScript + Vite + Biome.

## Architecture

- `src/main.ts` – Entry point, orchestrates installer and global.json
- `src/installer.ts` – .NET download/install via `@actions/tool-cache`
- `src/types.ts` – Shared types
- `src/utils/global-json-reader.ts` – Reads and parses global.json for SDK versions
- `src/utils/input-parser.ts` – Parses version inputs (comma-separated, multiline)
- `src/utils/platform-utils.ts` – Platform and architecture detection
- `src/utils/archive-utils.ts` – Archive extraction
- `src/utils/cache-utils.ts` – Cache key, restore/save
- `src/utils/versioning/version-resolver.ts` – Wildcards, keywords (lts, sts, latest), semver
- `src/utils/versioning/version-deduplicator.ts` – SDK/Runtime deduplication
- `src/utils/versioning/sdk-runtime-mapper.ts` – SDK → runtimes, avoids duplicate installs
- `action.yml` – Inputs: `sdk-version`, `runtime-version`, `aspnetcore-version`, `global-json`, `cache`, `allow-preview`; Outputs: `dotnet-version`, `dotnet-path`, `cache-hit`

## Build

**Critical:** Vite bundles everything into `dist/index.js` for GitHub Actions.

```bash
pnpm build    # TypeScript → Vite SSR bundle
pnpm format   # Biome auto-fix
pnpm lint     # Biome
pnpm knip     # Knip
pnpm test     # Vitest
pnpm validate # build + format + lint + knip + test
```
