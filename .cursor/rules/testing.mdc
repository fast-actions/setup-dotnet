---
description: Vitest tests, structure, mocking, and cleanup for setup-dotnet
globs: "**/*.ts"
alwaysApply: false
---

# Testing

- **Framework:** Vitest
- **Location:** Tests in `*.test.ts` next to source (e.g. `version-resolver.test.ts` next to `version-resolver.ts`)
- **Required:** Tests for every module and important functions
- **Focus:** Happy paths, edge cases, error handling; keep tests simple and focused
- **Mocking:** Mock external deps (`@actions/*`, `fetch`, etc.) via `globalThis`
- **Cleanup:** Use `afterEach` to remove test artifacts (temp files, directories)

## Example

```typescript
import { describe, it, expect } from 'vitest';
import { functionName } from './module';

describe('functionName', () => {
  it('should handle basic case', () => {
    expect(functionName('input')).toBe('expected');
  });
});
```
